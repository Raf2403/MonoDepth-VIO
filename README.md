# Depth-Anything-3 üöÄ

**Depth-Anything-3** ‚Äî —ç—Ç–æ –º–æ–¥—É–ª—å –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –∫–∞—Ä—Ç –≥–ª—É–±–∏–Ω—ã —Å –ø–æ–º–æ—â—å—é –Ω–µ–π—Ä–æ—Å–µ—Ç–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å –∫–∞–º–µ—Ä—ã. –ú–æ–¥—É–ª—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –æ–±—É—á–µ–Ω–Ω—ã–µ –≤–µ—Å–∞ –º–æ–¥–µ–ª–∏ (`model.safetensors`) –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—É—á–∞—Ç—å –∫–∞—Ä—Ç—É –≥–ª—É–±–∏–Ω—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

<p align="center">
  <img src="assets/images/demo320-2.gif" alt="Depth Anything 3 - Left" width="70%">
</p>

## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ ‚ú®

- –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å –∫–∞–º–µ—Ä—ã üì∑
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç—ã –≥–ª—É–±–∏–Ω—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–æ–¥–µ–ª–∏ `Depth-Anything-3` üåä
- –ü—Ä–æ—Å—Ç–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ Python-–ø—Ä–æ–µ–∫—Ç—ã üêç

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –Ω–∞ Windowsüõ†Ô∏è

1. **–°–∫–∞—á–∞—Ç—å zip-–∞—Ä—Ö–∏–≤ —Å –≤–µ—Ç–∫–∏ `master1`** üì•
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ —Å–∫–∞—á–∞–π—Ç–µ ZIP-–∞—Ä—Ö–∏–≤ —Å –≤–µ—Ç–∫–∏ `master1`.

2. **–†–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å –∞—Ä—Ö–∏–≤** üìÇ
   - –†–∞—Å–ø–∞–∫—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∞—Ä—Ö–∏–≤–∞ –≤ —É–¥–æ–±–Ω—É—é –ø–∞–ø–∫—É.

3. **–°–∫–∞—á–∞—Ç—å –≤–µ—Å–∞ –º–æ–¥–µ–ª–∏** üß†
   - –°–∫–∞—á–∞–π—Ç–µ `model.safetensors` –ø–æ —Å—Å—ã–ª–∫–µ:  
     [https://huggingface.co/depth-anything/DA3METRIC-LARGE/tree/main](https://huggingface.co/depth-anything/DA3METRIC-LARGE/tree/main)  
   - –ü–æ–º–µ—Å—Ç–∏—Ç–µ —Ñ–∞–π–ª –≤ –ø–∞–ø–∫—É:  
     ```
     Depth-Anything-3-main\src\depth_anything_3\weights\DA3METRIC-LARGE
     ```

4. **–°–∫–∞—á–∞—Ç—å –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Python 3.9.9** üêç 
   - –°—Å—ã–ª–∫–∞ –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è: [Python 3.9.9](https://www.python.org/downloads/release/python-399/)

5. **–°–æ–∑–¥–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ** üå± 
   - –û—Ç–∫—Ä–æ–π—Ç–µ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞ –≤ VS Code  
   - –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ, —É–∫–∞–∑–∞–≤ –ø—É—Ç—å –∫ Python 3.9.9:
     ```bash
     "C:\...\Python39\python.exe" -m venv .venv
     ```

6. **–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ** ‚ñ∂Ô∏è 
   ```bash
   .venv\Scripts\activate
   ```

7. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** üì¶  
   ```bash
   pip install -r requirements.txt
   ```

8. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ç–µ–∫—É—â—É—é –ø–∞–ø–∫—É –∫–∞–∫ Python-–ø–∞–∫–µ—Ç** ‚öôÔ∏è  
   ```bash
   pip install .
   ```

9. **–ó–∞–ø—É—Å–∫ —Ñ–∞–π–ª–∞** üöÄ  
   ```bash
   python infer_camera.py
   ```

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞–±–æ—á–µ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è: Ubuntu 22.04 + ROS2 Humble + OpenVINS

## [–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ ROS2 Humble](https://docs.ros.org/en/humble/Installation/Ubuntu-Install-Debs.html)
   –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º ros-humble-desktop –∏ rov-dev-tools.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ OpenVINS

1. **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ä–∞–±–æ—á–µ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞** 
   ```bash
   mkdir -p ~/ros2_ws/src
   cd ~/ros2_ws/src
   ```

2. **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ OpenVINS**
   ```bash
   git clone https://github.com/rpng/open_vins.git
   ```

3. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**
   ```bash
   sudo apt update
   sudo apt install -y libgoogle-glog-dev libgflags-dev libsuitesparse-dev libceres-dev libopencv-dev
   ```

4. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π ROS —á–µ—Ä–µ–∑ rosdep**
   ```bash
   cd ~/ros2_ws
   sudo apt install python3-rosdep
   sudo rosdep init
   rosdep update
   rosdep install --from-paths src --ignore-src -r -y
   ```

5. **–ó–∞–∫—Ä—ã–≤–∞–µ–º —Ç–µ—Ä–º–∏–Ω–∞–ª**

6. **–£–≤–µ–ª–∏—á–∏–≤–∞–µ–º SWAP (—Ñ–∞–π–ª –ø–æ–¥—Å–∫–∞—á–∫–∏) –¥–æ –º–∞–∫—Å–∏–º—É–º–∞ (16 –ì–ë)**
   ```bash
   sudo swapoff -a  # –í—ã–∫–ª—é—á–∏—Ç—å —Ç–µ–∫—É—â–∏–π
   sudo fallocate -l 16G /swapfile
   sudo chmod 600 /swapfile
   sudo mkswap /swapfile
   sudo swapon /swapfile
   ```

7. **–ó–∞–ø—É—Å–∫–∞–µ–º —Å–±–æ—Ä–∫—É –≤ –æ–¥–∏–Ω –ø–æ—Ç–æ–∫**
   ```bash
   source /opt/ros/humble/setup.bash
   cd ~/ros2_ws
   colcon build --symlink-install --executor sequential --cmake-args -DCMAKE_BUILD_TYPE=Release -DCMAKE_BUILD_PARALLEL_LEVEL=1
   ```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ OpenVINS

1. **–ó–∞–ø—É—Å–∫–∞–µ–º –Ω–æ–≤—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª**
   ```bash
   source ~/ros2_ws/install/setup.bash
   ros2 launch ov_msckf subscribe.launch.py config:=euroc_mav
   ```

2. **–ó–∞–ø—É—Å–∫–∞–µ–º –µ—â–µ –æ–¥–∏–Ω —Ç–µ—Ä–º–∏–Ω–∞–ª –¥–ª—è –∑–∞–ø—É—Å–∫–∞ RViz**
   ```bash
   source ~/ros2_ws/install/setup.bash
   rviz2
   ```
   –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ rviz –≤ –ª–µ–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É –∂–º–µ–º –Ω–∞ –∫–Ω–æ–ø–∫—É Add, –ø–µ—Ä–µ—Ö–æ–¥–∏–º –≤–æ –≤–∫–ª–∞–¥–∫—É by topic –∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Ç–æ–ø–∏–∫–∏ ov_msckf (OpenVINS), —á—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç –æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–µ.

## –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –¥–∞—Ç–∞—Å–µ—Ç–∞ OpenVINS

1. **–°–∫–∞—á–∏–≤–∞–µ–º –¥–∞—Ç–∞—Å–µ—Ç MH_01_easy (rosbag2) –ø–æ [—Å—Å—ã–ª–∫–µ](https://docs.openvins.com/gs-datasets.html#gs-data-euroc)**

2. **–†–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞–µ–º zip-–∞—Ä—Ö–∏–≤ —Å –¥–∞—Ç–∞—Å–µ—Ç–æ–º, –ø–æ–ª—É—á–∞–µ–º –ø–∞–ø–∫—É –≤ Downloads**

3. **–ó–∞–ø—É—Å–∫–∞–µ–º OpenVINS**
   ```bash
   source ~/ros2_ws/install/setup.bash
   ros2 launch ov_msckf subscribe.launch.py config:=euroc_mav
   ```

4. **–ó–∞–ø—É—Å–∫–∞–µ–º RViz –≤ –Ω–æ–≤–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ**
   ```bash
   source ~/ros2_ws/install/setup.bash
   rviz2
   ```

5. **–í –æ–∫–Ω–µ RViz —Å–ª–µ–≤–∞ –≤ –º–µ–Ω—é Fixed Frame –ø–∏—à–µ–º global**

6. **–¢–∞–∫–∂–µ –≤ –ª–µ–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É –∂–º–µ–º –Ω–∞ –∫–Ω–æ–ø–∫—É Add –∏ –¥–æ–±–∞–≤–ª—è–µ–º 2 —Ç–æ–ø–∏–∫–∞: /ov_msckf/pathimu –∏ /ov_msckf/poseimu**

7. **–ó–∞–ø—É—Å–∫–∞–µ–º –¥–∞—Ç–∞—Å–µ—Ç –≤ –Ω–æ–≤–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ**
   ```bash
   cd ~/Downloads
   source ~/ros2_ws/install/setup.bash
   ros2 bag play MH_01_easy 
   ```

## –°–±–æ—Ä–∫–∞ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏ Depth Anything 3 –Ω–∞ Ubuntu 22.04

1. **–°–∫–∞—á–∞—Ç—å zip-–∞—Ä—Ö–∏–≤ —Å –≤–µ—Ç–∫–∏ `master1`** 
   
   –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ —Å–∫–∞—á–∞–π—Ç–µ ZIP-–∞—Ä—Ö–∏–≤ —Å –≤–µ—Ç–∫–∏ `master1`.

2. **–†–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å –∞—Ä—Ö–∏–≤** 
  
   –†–∞—Å–ø–∞–∫—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∞—Ä—Ö–∏–≤–∞ –≤ —É–¥–æ–±–Ω—É—é –ø–∞–ø–∫—É.

3. **–°–∫–∞—á–∞—Ç—å –≤–µ—Å–∞ –º–æ–¥–µ–ª–∏** 

   –°–∫–∞—á–∞–π—Ç–µ `model.safetensors` –ø–æ —Å—Å—ã–ª–∫–µ:  
     [https://huggingface.co/depth-anything/DA3METRIC-LARGE/tree/main](https://huggingface.co/depth-anything/DA3METRIC-LARGE/tree/main)  
   –ü–æ–º–µ—Å—Ç–∏—Ç–µ —Ñ–∞–π–ª –≤ –ø–∞–ø–∫—É:  
     ```
     Depth-Anything-3-main\src\depth_anything_3\weights\DA3METRIC-LARGE
     ```

4. **–°–æ–∑–¥–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ**  
   –û—Ç–∫—Ä–æ–π—Ç–µ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞ –≤ VS Code  
   –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ, –∏—Å–ø–æ–ª—å–∑—É—é —Å–∏—Å—Ç–µ–º–Ω—ã–π Python (–¥–ª—è Ubuntu 22.04 —ç—Ç–æ Python 3.10):
     ```bash
     /usr/bin/python3 -m venv .venv
     ```

5. **–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ** 
   ```bash
   source .venv/bin/activate
   ```

6. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**  
   ```bash
   pip install -r requirements.txt
   ```

7. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ç–µ–∫—É—â—É—é –ø–∞–ø–∫—É –∫–∞–∫ Python-–ø–∞–∫–µ—Ç**  
   ```bash
   pip install .
   ```

## –ü–æ—Ä—è–¥–æ–∫ –∑–∞–ø—É—Å–∫–∞ —Ä–∞–±–æ—á–µ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

1. **–ó–∞–ø—É—Å–∫ OpenVINS**
   ```bash
   source ~/ros2_ws/install/setup.bash
   ros2 launch ov_msckf subscribe.launch.py config:=euroc_mav
   ```

2. **–ó–∞–ø—É—Å–∫ RViz**
   ```bash
   source ~/ros2_ws/install/setup.bash
   rviz2
   ```

3. **–í –æ–∫–Ω–µ RViz —Å–ª–µ–≤–∞ –≤ –º–µ–Ω—é Fixed Frame –ø–∏—à–µ–º camera**

4. **–ó–∞–ø—É—Å–∫ ROS –∏ python-—Å–∫—Ä–∏–ø—Ç–∞**  
   ```bash
   source ~/ros2_ws/install/setup.bash
   python3 depth_publisher.py
   ```

5. **–í –æ–∫–Ω–µ RViz –≤ –ª–µ–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É –∂–º–µ–º –Ω–∞ –∫–Ω–æ–ø–∫—É Add –∏ –¥–æ–±–∞–≤–ª—è–µ–º 2 —Ç–æ–ø–∏–∫–∞: /cam0/image_raw –∏ /depth/image_raw**

6. **–ó–∞–ø—É—Å–∫ –¥–∞—Ç–∞—Å–µ—Ç–∞ –≤ –Ω–æ–≤–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ**
   ```bash
   cd ~/Downloads
   source ~/ros2_ws/install/setup.bash
   ros2 bag play MH_01_easy 
   ```





